# ğŸ§± Apex é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ï¼ˆå®Œæ•´ç‰ˆï¼‰

> â€”â€” ä»â€œç”Ÿæ´»ä¸–ç•Œâ€åˆ°â€œä»£ç ä¸–ç•Œâ€çš„æ€ç»´è½¬æ¢
> é¢å‘å¯¹è±¡çš„ä¸‰æ ¹æ”¯æŸ±ï¼š**å°è£…ï¼ˆEncapsulationï¼‰**ã€**ç»§æ‰¿ï¼ˆInheritanceï¼‰**ã€**å¤šæ€ï¼ˆPolymorphismï¼‰**

---

## ğŸ§© ä¸€ã€å°è£…ï¼ˆEncapsulationï¼‰

> **å…³é”®è¯ï¼š**éšè—ç»†èŠ‚ã€æš´éœ²æ¥å£ã€æ•°æ®å®‰å…¨

### ğŸ’¬ æ¯”å–»ï¼š

è‡ªåŠ¨å’–å•¡æœº â˜•ï¼š
ä½ æŒ‰æŒ‰é’®ï¼ˆæ¥å£ï¼‰ï¼Œå°±èƒ½å‡ºå’–å•¡ã€‚
ä½ çœ‹ä¸åˆ°ã€ä¹Ÿä¸èƒ½ç›´æ¥ä¿®æ”¹å†…éƒ¨åŠ çƒ­å™¨ã€æ³µã€ç®¡é“ã€‚

è¿™å°±æ˜¯ã€Œå°è£…ã€â€”â€”
**æŠŠå†…éƒ¨å¤æ‚é€»è¾‘è—èµ·æ¥ï¼Œåªç»™å¤–éƒ¨å®‰å…¨å¯æ§çš„é€šé“ã€‚**

---

### âœ… ä»£ç ç¤ºä¾‹

```apex
public class BankAccount {
    // ğŸ”’ å°è£…çš„æ ¸å¿ƒï¼šå†…éƒ¨æ•°æ®å¯¹å¤–ä¸å¯ç›´æ¥è®¿é—®
    private Decimal balance;

    // âœ… é€šè¿‡å®‰å…¨æ–¹æ³•æ§åˆ¶è®¿é—®
    public void deposit(Decimal amount) {
        if (amount > 0) balance += amount;
        else System.debug('âŒ å­˜æ¬¾é‡‘é¢æ— æ•ˆ');
    }

    public void withdraw(Decimal amount) {
        if (amount > 0 && amount <= balance) balance -= amount;
        else System.debug('âŒ å–æ¬¾å¤±è´¥');
    }

    public Decimal getBalance() {
        return balance; // å¤–éƒ¨åªèƒ½è¯»å–ï¼Œä¸èƒ½ç›´æ¥æ”¹
    }
}
```

```apex
BankAccount acc = new BankAccount();
acc.deposit(500);
acc.withdraw(200);
System.debug(acc.getBalance()); // âœ… è¾“å‡º 300
```

---

## ğŸ§© äºŒã€ç»§æ‰¿ï¼ˆInheritanceï¼‰

> **å…³é”®è¯ï¼š**ä»£ç å¤ç”¨ã€çˆ¶å­å…³ç³»ã€`extends`ã€`super`

### ğŸ’¬ æ¯”å–»ï¼š

ã€Œäº¤é€šå·¥å…·ã€æ˜¯ä¸€ä¸ªå¤§ç±» ğŸš—ğŸš²âœˆï¸
æ±½è½¦ã€è‡ªè¡Œè½¦éƒ½å±äºäº¤é€šå·¥å…·ï¼Œéƒ½æœ‰â€œå¯åŠ¨â€å’Œâ€œåœæ­¢â€çš„åŠŸèƒ½ã€‚

ä½†æ¯ç§äº¤é€šå·¥å…·çš„â€œå¯åŠ¨æ–¹å¼â€ä¸åŒã€‚

---

### âœ… åŸºç¡€ç»§æ‰¿ç¤ºä¾‹

```apex
public virtual class Vehicle {
    public String brand;

    public Vehicle(String brandName) {
        brand = brandName;
    }

    public void start() {
        System.debug(brand + ' äº¤é€šå·¥å…·å¯åŠ¨');
    }

    public void stop() {
        System.debug(brand + ' äº¤é€šå·¥å…·åœæ­¢');
    }
}
```

#### å­ç±»ç»§æ‰¿çˆ¶ç±»ï¼š

```apex
public class Car extends Vehicle {
    public Boolean hasEngine = true;

    // ğŸ”¹ ä½¿ç”¨ super è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
    public Car(String brandName) {
        super(brandName); // è°ƒç”¨çˆ¶ç±» Vehicle(String)
    }

    // å­ç±»æ–°å¢æ–¹æ³•
    public void honk() {
        System.debug(brand + ' æ±½è½¦é¸£ç¬› ğŸš—ğŸ“£');
    }
}
```

---

### ğŸ”¹ è°ƒç”¨ï¼š

```apex
Car c = new Car('Toyota');
c.start();  // âœ… çˆ¶ç±»æ–¹æ³•
c.honk();   // âœ… å­ç±»æ–¹æ³•
c.stop();   // âœ… çˆ¶ç±»æ–¹æ³•
```

---

### ğŸ§  çˆ¶ç±»ä¸å­ç±»çš„å±æ€§å…³ç³»ï¼š

| æƒ…å†µ                                | è¯´æ˜                 |
| --------------------------------- | ------------------ |
| å­ç±»ç»§æ‰¿çˆ¶ç±»çš„ `public` / `protected` æˆå‘˜ | å¯ä»¥ç›´æ¥ä½¿ç”¨             |
| å­ç±»æ— æ³•è®¿é—®çˆ¶ç±»çš„ `private` æˆå‘˜            | å¿…é¡»é€šè¿‡ getter/setter |
| å­ç±»å¯ä»¥æ‹¥æœ‰ä¸çˆ¶ç±»åŒåçš„å­—æ®µï¼ˆä½†ä¸æ¨èï¼‰              | ä¼šâ€œéšè—â€çˆ¶ç±»å­—æ®µ          |

---

### âš™ï¸ ç¤ºä¾‹ï¼šçˆ¶ç±»å±æ€§ä¸å­ç±»å±æ€§åŒå

```apex
public virtual class Animal {
    public String name = 'Animal';
}

public class Dog extends Animal {
    public String name = 'Dog'; // âš ï¸ éšè—äº†çˆ¶ç±»å­—æ®µ

    public void showNames() {
        System.debug('å­ç±»name: ' + name);      // Dog
        System.debug('çˆ¶ç±»name: ' + super.name); // Animal
    }
}
```

```apex
Dog d = new Dog();
d.showNames();
```

ğŸ§  è¾“å‡ºï¼š

```
å­ç±»name: Dog
çˆ¶ç±»name: Animal
```

> ğŸ’¡ `super.name` è¡¨ç¤ºè®¿é—®çˆ¶ç±»çš„åŒåå±æ€§ï¼Œ`this.name` æˆ– `name` è¡¨ç¤ºå½“å‰å­ç±»çš„å±æ€§ã€‚

---

## ğŸ§© ä¸‰ã€å¤šæ€ï¼ˆPolymorphismï¼‰

> **å…³é”®è¯ï¼š**ç›¸åŒæ–¹æ³•ï¼Œä¸åŒè¡Œä¸ºï¼›ä¸Šè½¬å‹ã€ä¸‹è½¬å‹

### ğŸ’¬ æ¯”å–»ï¼š

ä½ æŒ‰ä¸‹ã€Œå¯åŠ¨äº¤é€šå·¥å…·ã€æŒ‰é’® ğŸš€
å¦‚æœä½ å¼€çš„è½¦æ˜¯æ±½è½¦ â†’ å‘åŠ¨æœºè½°é¸£ï¼›
å¦‚æœä½ éª‘çš„æ˜¯è‡ªè¡Œè½¦ â†’ è¸©è¸æ¿å¯åŠ¨ï¼›
å¦‚æœä½ åçš„æ˜¯é£æœº â†’ å¼•æ“å–·å°„ã€‚

ğŸ‘‰ åŒæ ·çš„â€œåŠ¨ä½œâ€ï¼Œä¸åŒçš„å¯¹è±¡æœ‰ä¸åŒçš„è¡¨ç°ã€‚

---

### âœ… ä»£ç ç¤ºä¾‹ï¼š

```apex
public virtual class Vehicle {
    public virtual void start() {
        System.debug('ğŸš— ä¸€èˆ¬äº¤é€šå·¥å…·å¯åŠ¨');
    }
}

public class Car extends Vehicle {
    public override void start() {
        System.debug('ğŸš™ æ±½è½¦å¼•æ“å¯åŠ¨');
    }
}

public class Bicycle extends Vehicle {
    public override void start() {
        System.debug('ğŸš´ è‡ªè¡Œè½¦ç”¨è„šå¯åŠ¨');
    }
}
```

---

### ğŸ§  ä¸Šè½¬å‹ï¼ˆUpcastingï¼‰

> â€œæŠŠå­ç±»å¯¹è±¡çœ‹ä½œçˆ¶ç±»å¯¹è±¡â€
> â€”â€” å­ç±» **è‡ªåŠ¨** è½¬ä¸ºçˆ¶ç±»ç±»å‹ï¼Œå¯ä»¥ç»Ÿä¸€ç®¡ç†ã€‚

```apex
Vehicle v1 = new Car();
Vehicle v2 = new Bicycle();

v1.start(); // è¾“å‡º ğŸš™ æ±½è½¦å¼•æ“å¯åŠ¨
v2.start(); // è¾“å‡º ğŸš´ è‡ªè¡Œè½¦ç”¨è„šå¯åŠ¨
```

ğŸ’¡ å¥½å¤„ï¼š
ä½ å¯ä»¥ç”¨ä¸€ä¸ªçˆ¶ç±»åˆ—è¡¨ï¼Œç»Ÿä¸€ç®¡ç†ä¸åŒç±»å‹çš„å¯¹è±¡ï¼š

```apex
List<Vehicle> vehicles = new List<Vehicle>{
    new Car(),
    new Bicycle()
};
for (Vehicle v : vehicles) {
    v.start(); // æ¯ä¸ªå¯¹è±¡è°ƒç”¨è‡ªå·±ç‰ˆæœ¬çš„ start()ï¼ˆå¤šæ€ï¼ï¼‰
}
```

---

### ğŸ§  ä¸‹è½¬å‹ï¼ˆDowncastingï¼‰

> â€œæŠŠçˆ¶ç±»å¯¹è±¡å¼ºåˆ¶è½¬å›å­ç±»ç±»å‹â€
> â€”â€” åªæœ‰å½“å¯¹è±¡åŸæœ¬å°±æ˜¯é‚£ä¸ªå­ç±»ï¼Œæ‰å¯ä»¥æˆåŠŸã€‚

```apex
Vehicle v = new Car(); // âœ… Upcasting
Car c = (Car)v;        // âœ… Downcasting
c.start();             // âœ… æ­£å¸¸æ‰§è¡Œ
```

âš ï¸ å¦‚æœä½ å¼ºåˆ¶è½¬å‹ä¸ºé”™è¯¯ç±»å‹ï¼Œä¼šæŠ¥é”™ï¼š

```apex
Vehicle v = new Bicycle();
Car c = (Car)v; // âŒ è¿è¡Œæ—¶é”™è¯¯
```

---

### âš™ï¸ ä¸Šä¸‹è½¬å‹å¯¹æ¯”è¡¨

| ç±»å‹è½¬æ¢             | å†™æ³•                       | æ˜¯å¦è‡ªåŠ¨ | è¯´æ˜             |
| ---------------- | ------------------------ | ---- | -------------- |
| ä¸Šè½¬å‹ï¼ˆUpcastingï¼‰   | `Vehicle v = new Car();` | âœ… è‡ªåŠ¨ | å­ç±» â†’ çˆ¶ç±»ï¼ˆå®‰å…¨ï¼‰    |
| ä¸‹è½¬å‹ï¼ˆDowncastingï¼‰ | `Car c = (Car)v;`        | âŒ æ‰‹åŠ¨ | çˆ¶ç±» â†’ å­ç±»ï¼ˆéœ€ç¡®è®¤ç±»å‹ï¼‰ |

---

### âœ… å®æˆ˜ï¼šå¤šæ€ä¸è½¬å‹ç»“åˆ

```apex
public virtual class Animal {
    public virtual void speak() {
        System.debug('ğŸ¾ åŠ¨ç‰©å‘å‡ºå£°éŸ³');
    }
}

public class Cat extends Animal {
    public override void speak() {
        System.debug('ğŸ± å–µå–µå«');
    }

    public void climb() {
        System.debug('ğŸ± çŒ«åœ¨çˆ¬æ ‘');
    }
}

public class Dog extends Animal {
    public override void speak() {
        System.debug('ğŸ¶ æ±ªæ±ªå«');
    }
}
```

#### è°ƒç”¨ï¼š

```apex
List<Animal> animals = new List<Animal>{
    new Cat(),
    new Dog()
};

for (Animal a : animals) {
    a.speak(); // å¤šæ€ï¼šæ¯ç§åŠ¨ç‰©è¡¨ç°ä¸åŒ
}

// ä¸‹è½¬å‹ï¼šåˆ¤æ–­åæ‰§è¡Œç‰¹å®šæ–¹æ³•
for (Animal a : animals) {
    if (a instanceof Cat) {
        ((Cat)a).climb(); // âœ… è½¬å‹åæ‰èƒ½è°ƒç”¨ Cat ç‹¬æœ‰æ–¹æ³•
    }
}
```

è¾“å‡ºï¼š

```
ğŸ± å–µå–µå«
ğŸ¶ æ±ªæ±ªå«
ğŸ± çŒ«åœ¨çˆ¬æ ‘
```

---

## ğŸ§© å››ã€ä¸‰å¤§ç‰¹æ€§æ€»ç»“è¡¨

| ç‰¹æ€§ | å…³é”®å­—                             | è¯´æ˜             | ç¤ºä¾‹æ¯”å–»           |
| -- | ------------------------------- | -------------- | -------------- |
| å°è£… | `private`, `{get; set;}`        | éšè—å†…éƒ¨ç»†èŠ‚ï¼Œåªæš´éœ²å¿…è¦æ¥å£ | å’–å•¡æœºæŒ‰é’®          |
| ç»§æ‰¿ | `extends`, `super`, `virtual`   | å­ç±»å¤ç”¨çˆ¶ç±»åŠŸèƒ½       | â€œæ±½è½¦â€ç»§æ‰¿â€œäº¤é€šå·¥å…·â€   |
| å¤šæ€ | `override`, `virtual`, `(Type)` | åŒæ¥å£å¤šè¡Œä¸ºï¼Œä¸Šè½¬å‹/ä¸‹è½¬å‹ | ä¸åŒäº¤é€šå·¥å…·â€œå¯åŠ¨â€ååº”ä¸åŒ |

---

## ğŸ§© äº”ã€å®Œæ•´ç»¼åˆç¤ºä¾‹

```apex
public virtual class Vehicle {
    public String brand;

    public Vehicle(String brandName) {
        brand = brandName;
    }

    public virtual void start() {
        System.debug(brand + ' é€šç”¨äº¤é€šå·¥å…·å¯åŠ¨');
    }
}

public class Car extends Vehicle {
    public Car(String brandName) {
        super(brandName);
    }

    public override void start() {
        System.debug('ğŸš— ' + brand + ' æ±½è½¦å¼•æ“å¯åŠ¨');
    }

    public void playMusic() {
        System.debug('ğŸµ ' + brand + ' æ’­æ”¾éŸ³ä¹');
    }
}

public class Bicycle extends Vehicle {
    public Bicycle(String brandName) {
        super(brandName);
    }

    public override void start() {
        System.debug('ğŸš´ ' + brand + ' è‡ªè¡Œè½¦å¼€å§‹éª‘è¡Œ');
    }
}

// è°ƒç”¨
List<Vehicle> listV = new List<Vehicle>{
    new Car('Toyota'),
    new Bicycle('Giant')
};

for (Vehicle v : listV) {
    v.start(); // å¤šæ€æ•ˆæœ
    if (v instanceof Car) {
        ((Car)v).playMusic(); // ä¸‹è½¬å‹åè®¿é—®å­ç±»ç‰¹æœ‰æ–¹æ³•
    }
}
```

ğŸ§  è¾“å‡ºï¼š

```
ğŸš— Toyota æ±½è½¦å¼•æ“å¯åŠ¨
ğŸµ Toyota æ’­æ”¾éŸ³ä¹
ğŸš´ Giant è‡ªè¡Œè½¦å¼€å§‹éª‘è¡Œ
```

---

## ğŸ§© å…­ã€æ€ç»´å¯¼å›¾æ€»ç»“ ğŸŒ³

| æ¦‚å¿µ | Apexå…³é”®è¯                 | ç°å®ç±»æ¯”       | æ ¸å¿ƒæ€ç»´ |
| -- | ----------------------- | ---------- | ---- |
| å°è£… | private/public, get/set | å’–å•¡æœºåªæš´éœ²æŒ‰é’®   | æ•°æ®å®‰å…¨ |
| ç»§æ‰¿ | extends, super          | äº¤é€šå·¥å…· â†’ æ±½è½¦  | ä»£ç å¤ç”¨ |
| å¤šæ€ | override, instanceof    | ä¸åŒäº¤é€šå·¥å…·å¯åŠ¨æ–¹å¼ | çµæ´»æ‰©å±• |

---

### âœ… æœ€åä¸€å£æ€»ç»“ï¼š

> * **å°è£…** â†’ â€œæˆ‘ä¸è®©ä½ ä¹±ç¢°æˆ‘å†…éƒ¨é›¶ä»¶â€
> * **ç»§æ‰¿** â†’ â€œæˆ‘ä»çˆ¶è¾ˆé‚£å„¿ç»§æ‰¿äº†æŠ€èƒ½â€
> * **å¤šæ€** â†’ â€œåŒæ ·çš„åŠ¨ä½œï¼Œæˆ‘å¯ä»¥æœ‰è‡ªå·±çš„è¡¨ç°â€

